<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MukallaStay | ููุญุฉ ุฅุฏุงุฑุฉ ุงูููุฏู</title>
  <link rel="stylesheet" href="hotel-dashboard.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- ๐ FullCalendar -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
</head>
<body>

  <!-- ๐ ุฒุฑ ุงููุถุน -->
  <label class="theme-switch" title="ุชุจุฏูู ุงููุถุน">
    <input type="checkbox" id="theme-toggle">
    <span class="slider"></span>
  </label>

  <header class="header">
    <div class="container header-row">
      <div>
        <h1>๐จ ููุญุฉ ุฅุฏุงุฑุฉ ุงูููุฏู</h1>
        <p id="welcome" class="muted">ูุฑุญุจูุง ุจู.</p>
      </div>
      <div class="actions">
        <button id="refresh" class="btn ghost">๐ ุชุญุฏูุซ</button>
        <button id="logout" class="btn danger">๐ช ุชุณุฌูู ุงูุฎุฑูุฌ</button>
      </div>
    </div>
  </header>

  <main class="container">

    <!-- ๐น ุฃุฒุฑุงุฑ ุงูุชุจููุจุงุช -->
    <nav class="tabs row center">
      <button class="tab active" data-target="bookings">ุงูุญุฌูุฒุงุช</button>
      <button class="tab" data-target="rooms">ุงูุบุฑู</button>
      <button class="tab" data-target="stats">ุงูุฅุญุตุงุฆูุงุช</button>
      <button class="tab" data-target="seasons">ุงูุฃุณุนุงุฑ ุงูููุณููุฉ</button>
    </nav>

    <!-- ๐น ุดุงุดุฉ ุงูุญุฌูุฒุงุช -->
    <section id="screen-bookings" class="screen active">
      <div class="stats">
        <div class="chip">ุงููู: <b id="sAll">0</b></div>
        <div class="chip success">ูุคูุฏ: <b id="sConfirmed">0</b></div>
        <div class="chip info">ุจุงูุชุธุงุฑ ุงูุนุฑุจูู: <b id="sDeposit">0</b></div>
        <div class="chip warn">ุจุงูุชุธุงุฑ ุชุฃููุฏ ุงูููุฏู: <b id="sWaitHotel">0</b></div>
        <div class="chip danger">ูุฑููุถ/ููุบู/ููุชูู: <b id="sBad">0</b></div>
      </div>

      <!-- ๐ ุดุฑูุท ุงูุฃุฏูุงุช -->
      <div class="toolbar container" style="margin-top:-6px;">
        <div class="row" style="gap:8px; align-items:center;">
          <input id="searchBox" type="text" placeholder="ุจุญุซ ุจุงูุงุณู/ุงูุฅูููู/ุงููุฑุฌุน..." class="inp">
          <input id="dateFrom" type="date" class="inp">
          <input id="dateTo" type="date" class="inp">

          <div class="status-filters">
            <button class="chip mini" data-status="ALL">ุงููู</button>
            <button class="chip mini" data-status="WAITING_HOTEL_CONFIRM">ุจุงูุชุธุงุฑ ุงูููุฏู</button>
            <button class="chip mini" data-status="AWAITING_DEPOSIT,DEPOSIT_SENT">ุจุงูุชุธุงุฑ ุงูุนุฑุจูู</button>
            <button class="chip mini" data-status="CONFIRMED">ูุคูุฏ</button>
            <button class="chip mini" data-status="REJECTED,CANCELLED,EXPIRED">ูุฑููุถ/ููุบู/ููุชูู</button>
          </div>

          <label class="auto-refresh">
            <input id="autoRefresh" type="checkbox"> ุชุญุฏูุซ ุชููุงุฆู (ูู 30ุซ)
          </label>

          <div style="margin-inline-start:auto; display:flex; gap:8px;">
            <button id="btnExport" class="btn ghost">โฌ๏ธ ุชุตุฏูุฑ CSV</button>
            <button id="btnPrint" class="btn ghost">๐จ๏ธ ุทุจุงุนุฉ</button>
            <span class="muted">ูุชุงุฆุฌ: <b id="resultCount">0</b></span>
          </div>
        </div>
      </div>

      <div id="list"></div>
      <div id="empty" class="empty hidden">ูุง ุชูุฌุฏ ุญุฌูุฒุงุช ุญุชู ุงูุขู.</div>
      <div id="loading" class="loading hidden">ุฌุงุฑู ุงูุชุญููู...</div>
    </section>

    <!-- ๐น ุดุงุดุฉ ุงูุบุฑู -->
    <section id="screen-rooms" class="screen">
      <div class="row space-between" style="margin-bottom:10px;">
        <h3>ุฅุฏุงุฑุฉ ุงูุบุฑู</h3>
        <button id="btnAddRoom" class="btn success">โ ุฅุถุงูุฉ ุบุฑูุฉ</button>
      </div>

      <div id="roomsList"></div>
      <div id="roomsEmpty" class="muted">ูุง ุชูุฌุฏ ุบุฑู ุญุชู ุงูุขู.</div>
    </section>

    <!-- ๐น ุดุงุดุฉ ุงูุฅุญุตุงุฆูุงุช -->
    <section id="screen-stats" class="screen">
      
      <h3>๐ ุฅุญุตุงุฆูุงุช ุงูููุฏู</h3>

      <!-- ุจุทุงูุงุช ุฃุฑูุงู ุนุงูุฉ -->
      <div id="statsCards" class="stats-grid" style="margin-top:10px;"></div>

      <!-- ูุณุจุฉ ุฅุดุบุงู ุงูุบุฑู -->
      <div id="occupancyCard" class="stats-card" style="margin-top:15px;">
        <h4>ูุณุจุฉ ุฅุดุบุงู ุงูุบุฑู</h4>
        <div id="occBarBox" class="occ-box">
          <div id="occBar" class="occ-bar"></div>
        </div>
        <div id="occText" class="muted">ุฌุงุฑู ุงูุญุณุงุจ...</div>
      </div>

      <!-- ุฑุณู ุจูุงูู: ุชูุฒูุน ุงูุญุงูุงุช -->
      <div class="stats-card" style="margin-top:15px;">
        <h4>ุชูุฒูุน ุญุงูุงุช ุงูุญุฌูุฒุงุช</h4>
        <canvas id="statsChart" width="700" height="220" class="chart"></canvas>
      </div>

      <!-- ุฑุณู ุจูุงูู: ุญุฌูุฒุงุช ุขุฎุฑ 14 ููู -->
      <div class="stats-card" style="margin-top:15px;">
        <h4>ุงูุญุฌูุฒุงุช ุฎูุงู ุขุฎุฑ 14 ููููุง</h4>
        <canvas id="dailyChart" width="700" height="220" class="chart"></canvas>
      </div>

      <!-- ๐ ุชูููู ุงูุญุฌูุฒุงุช -->
      <h3>๐ ุชูููู ุงูุญุฌูุฒุงุช</h3>
      
      <!-- ๐น ููุชุฑ ุงูุบุฑู ุงููุถุงูุฉ -->
      <div class="row" style="justify-content: flex-end; align-items:center; gap:8px; margin-bottom:10px;">
        <label for="roomFilter" style="font-weight:600;">ุงุฎุชุฑ ุงูุบุฑูุฉ:</label>
        <select id="roomFilter" class="inp" style="min-width:180px;">
          <option value="all">ูู ุงูุบุฑู</option>
        </select>
      </div>
      
      <div id="calendarContainer" style="margin-top:20px;">
        <div id="hotelCalendar" style="max-width:100%; background:#fff; border-radius:10px; padding:10px; box-shadow:0 0 10px rgba(0,0,0,0.1);"></div>
      </div>

      <!-- ๐ง ุชุญููู ุงูุฃุฏุงุก -->
      <section id="performance" class="analytics">
        <h3>๐ง ุชุญููู ุงูุฃุฏุงุก</h3>

        <div class="grid4">
          <div class="card stat">
            <div class="label">โฑ๏ธ ูุชูุณุท ูุฏุฉ ุงูุฅูุงูุฉ</div>
            <canvas id="chartStay" height="80"></canvas>
          </div>

          <div class="card stat">
            <div class="label">๐จ ุฃูุซุฑ ููุน ุบุฑูุฉ ุญูุฌุฒ</div>
            <canvas id="chartRoom" height="80"></canvas>
          </div>

          <div class="card stat">
            <div class="label">๐ ุฃูุซุฑ ุดูุฑ ููู ุญุฌูุฒุงุช</div>
            <canvas id="chartMonth" height="80"></canvas>
          </div>

          <div class="card stat">
            <div class="label">๐ฅ ุงูุนููุงุก ุงูุฌุฏุฏ ููุงุจู ุงูุนุงุฆุฏูู</div>
            <canvas id="chartClients" height="80"></canvas>
          </div>
        </div>
      </section>

      <!-- ๐ผ ูุธุงู ุงูุฅูุฑุงุฏุงุช -->
      <section id="revenues" class="analytics">
        <h3>๐ฆ ูุธุงู ุงูุฅูุฑุงุฏุงุช</h3>

        <div class="grid4">
          <div class="card stat">
            <div class="label">๐ฐ ูุฌููุน ุงูุนุฑุจูู ุงููุณุชูู (5%)</div>
            <div id="totalDeposit" class="value">โ</div>
          </div>

          <div class="card stat">
            <div class="label">๐จ ุฃุฑุจุงุญ ุงูููุฏู (90% ูู ุงูุนุฑุจูู)</div>
            <div id="monthlyRevenue" class="value">โ</div>
          </div>

          <div class="card stat">
            <div class="label">๐ต ุนูููุฉ ุงููููุน (10% ูู ุงูุนุฑุจูู)</div>
            <div id="netProfit" class="value">โ</div>
          </div>
        </div>

        <p style="text-align:center; color:#aaa; margin-top:10px;">
          ๐ก ุชูุฒูุน ุงูุฅูุฑุงุฏุงุช: 90% ููููุฏู โ 10% ูููููุน (ูู ุงูุนุฑุจูู ุงูููู 5% ุงูุฐู ูุฏูุนู ุงูุนููู)
        </p>

        <div class="card" style="margin-top:20px;">
          <h4 style="text-align:center;margin-bottom:10px;">๐ ุงูุฅูุฑุงุฏุงุช ุญุณุจ ุงูุดูุฑ</h4>
          <canvas id="chartRevenuePerMonth" height="100"></canvas>
        </div>
      </section>
    </section>

    <!-- ๐น ุดุงุดุฉ ุงูุฃุณุนุงุฑ ุงูููุณููุฉ -->
    <section id="screen-seasons" class="screen">
      <h3>๐ท๏ธ ุฅุฏุงุฑุฉ ุงูุฃุณุนุงุฑ ุงูููุณููุฉ</h3>
      <form id="seasonForm" class="row" style="gap:10px;flex-wrap:wrap;margin:10px 0;">
        <input type="text" id="seasonName" class="input" placeholder="ุงุณู ุงูููุณู (ูุซูุงู: ุงูุตูู)" required>
        <input type="date" id="seasonStart" class="input" required>
        <input type="date" id="seasonEnd" class="input" required>
        <input type="number" id="seasonPrice" class="input" placeholder="ุงูุณุนุฑ ุงูุฌุฏูุฏ $" required>
        <input type="number" id="seasonMinStay" class="input" placeholder="ุงูุญุฏ ุงูุฃุฏูู ููุฅูุงูุฉ" value="1">
        <select id="seasonRoom" class="input"></select>
        <button type="submit" class="btn">โ ุฅุถุงูุฉ</button>
      </form>
      <table class="table" id="seasonTable">
        <thead>
          <tr>
            <th>ุงูููุณู</th>
            <th>ูู</th>
            <th>ุฅูู</th>
            <th>ุงูุณุนุฑ</th>
            <th>ุงูุฅูุงูุฉ</th>
            <th>ุงูุบุฑูุฉ</th>
            <th>ุฅุฌุฑุงุก</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <div id="toasts"></div>
  </main>

  <script src="hotel-dashboard.js"></script>
</body>
</html>